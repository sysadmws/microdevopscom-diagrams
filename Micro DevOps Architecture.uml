@startuml
cloud "Client" {
  cloud "Optional Client GitLab Instance" {
    archimate #Technology "GitLab Server" as GitLabServerClient <<technology-device>>
    archimate #Business "Server License" as ServerLicenseGitLabServerClient <<business-value>>
    ServerLicenseGitLabServerClient .down.> GitLabServerClient
    archimate #Technology "Client App Project" as ClientAppProject <<composition>>
    archimate #Technology "Client IaC\nSaltStack Project" as ClientSaltProject <<composition>>
    GitLabServerClient -- ClientAppProject
    GitLabServerClient -- ClientSaltProject
  }
  cloud "Optional Client SaltStack Instance" {
    archimate #Technology "SaltStack Server" as SaltStackServerClient <<technology-device>>
    archimate #Business "Server License" as ServerLicenseSaltStackServerClient <<business-value>>
    ServerLicenseSaltStackServerClient .down.> SaltStackServerClient
  }
  archimate #Business "Executive" as ClientExecutive <<business-actor>>
  ClientSaltProject  .left..> SaltStackServerClient : Git Submodule
}
cloud "[[https://sysadmin-workshop.com/ Sysadmin Workshop]]" {
  cloud "[[https://microdevops.com/ Micro DevOps]] Core" {
    archimate #Technology "Accounting Server" as AccountingServer <<technology-device>>
    archimate #Technology "Accounting DB" as AccountingDB <<role>>
    archimate #Technology "Website" as WebSite <<technology-device>>
    AccountingServer -> WebSite : "WooCommerce API"
    AccountingServer -- AccountingDB 
  }
  cloud "SaltStack" {
    archimate #Technology "SaltStack Server" as SaltStackServer <<technology-device>>
  }
  cloud "GitLab" {
    archimate #Technology "GitLab Server" as GitLabServer <<technology-device>>
    archimate #Technology "GitLab DB" as GitLabDB <<role>>
    GitLabServer -up- GitLabDB
    cloud "Client Project Group" as ClientProjectGroup {
      archimate #Technology "App Project" as AppProject <<composition>>
      archimate #Technology "App Project" as AppProject <<composition>>
    }
    cloud "Admin Group" as AdminGroup {
      archimate #Technology "Client IaC\nSaltStack Project" as ClientSaltProjectOur <<composition>>
      archimate #Technology "Client Tasks Project" as ClientTasksProject <<composition>>
      archimate #Technology "Client CI Runner Project" as ClientCIProject <<composition>>
    }
  }
  AccountingServer ..down..> ClientTasksProject : Reports
  AccountingServer <..down.. ClientTasksProject : Analytics
  AccountingDB ..down.. GitLabDB : PostgreSQL\nDBLink
  ClientSaltProjectOur  ..up..> SaltStackServer : Git Submodule
}
ClientExecutive .down..> WebSite : Payment
WebSite .up..> ClientExecutive : Invoice
ClientSaltProject  ...> SaltStackServer : Git Submodule
@enduml
